!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/router"),require("@angular/common"),require("crypto-js"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("factor-utils",["exports","@angular/router","@angular/common","crypto-js","@angular/common/http","rxjs","rxjs/operators","@angular/core"],t):t(e["factor-utils"]={},e.ng.router,e.ng.common,e.CryptoJS,e.ng.common.http,e.rxjs,e.rxjs.operators,e.ng.core)}(this,function(e,n,a,t,i,o,c,r){"use strict";var s=(l.prototype.loadValue=function(n){var o=this;if(n&&0<n.length)for(var a=[],e=function(e){var t=n.item(e),r=new FileReader;r.readAsDataURL(t),r.onload=function(){a.push(Object.assign(t,{data:r.result})),a.length==n.length&&(o.callback(0<a.length?a:null),o.fileInput.value=null)}},t=0;t<n.length;t++)e(t)},l.prototype.open=function(e,t){this.fileInput.accept=t&&t.accept?t.accept:"",this.fileInput.multiple=t&&t.multiple,this.fileInput.click(),this.callback=e},l.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[]},l.ngInjectableDef=r.defineInjectable({factory:function(){return new l},token:l,providedIn:"root"}),l);function l(){var t=this;this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.addEventListener("change",function(e){new FileReader;t.loadValue(e.target.files)})}var u=(p.prototype.appendTrackingCode=function(e){try{if(e){this.trackingId=e;var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+e,document.head.appendChild(t);var r=document.createElement("script");r.innerHTML="\n         window.dataLayer = window.dataLayer || [];\n         function gtag(){dataLayer.push(arguments);}\n         gtag('js', new Date());\n         gtag('config', '"+e+"');\n       ",document.head.appendChild(r),this.initSubscribers()}}catch(n){console.error("Error appending google analytics"),console.error(n)}},p.prototype.initSubscribers=function(){var r=this;this.router.events.subscribe(function(e){try{"function"==typeof gtag&&e instanceof n.NavigationEnd&&r.trackingId&&setTimeout(function(){gtag("config",r.trackingId,{page_title:document.title,page_path:e.urlAfterRedirects})},100)}catch(t){console.error(t)}})},p.prototype.trackEvent=function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n=null),"function"==typeof gtag&&gtag("event",e,{event_category:t,event_label:r,value:n})},p.prototype.trackException=function(e,t){"function"==typeof gtag&&gtag("event","exception",{description:e,fatal:t})},p.prototype.setUserId=function(e){"function"==typeof gtag&&gtag("set",{user_id:e})},p.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],p.ctorParameters=function(){return[{type:n.Router}]},p.ngInjectableDef=r.defineInjectable({factory:function(){return new p(r.inject(n.Router))},token:p,providedIn:"root"}),p);function p(e){this.router=e}var d=(f.prototype.handleError=function(e){var t=this.injector.get(u);if(e instanceof i.HttpErrorResponse){if(navigator.onLine){var r=e.error?JSON.stringify(e.error):e.message;t.trackEvent(e.url,"Http Error",e.status+" - "+r)}}else{var n=this.injector.get(a.LocationStrategy),o=(r=e.message?e.message:e.toString(),e.stack?e.stack:e.toString());n instanceof a.PathLocationStrategy&&n.path(),t.trackEvent(r,"Javascript Error",o)}throw e},f.decorators=[{type:r.Injectable}],f.ctorParameters=function(){return[{type:r.Injector}]},f);function f(e){this.injector=e}var g=(h.prototype.handleError=function(e){if(e instanceof i.HttpErrorResponse&&navigator.onLine){var t=e.error?JSON.stringify(e.error):e.message;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"http_error","gtm.errorMessage":t,"gtm.errorUrl":e.url,error_status:e.status})}throw e},h.decorators=[{type:r.Injectable}],h.ctorParameters=function(){return[{type:r.Injector}]},h);function h(e){this.injector=e}var y=(m.prototype.appendTrackingCode=function(e){try{if(a.isPlatformBrowser(this.platformId)&&e){this.trackingId=e;var t=document.createElement("script");t.innerHTML="\n          (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n          'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n          })(window,document,'script','dataLayer','"+e+"');\n        ",document.head.appendChild(t);var r=document.createElement("noscript"),n=document.createElement("iframe");n.width="0",n.height="0",n.style.display="none",n.style.visibility="hidden",n.src="https://www.googletagmanager.com/ns.html?id="+e,r.appendChild(n),document.body.prepend(r)}}catch(o){console.error("Error appending google tag manager"),console.error(o)}},m.prototype.addVariable=function(e){window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)},m.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],m.ctorParameters=function(){return[{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]}]},m.ngInjectableDef=r.defineInjectable({factory:function(){return new m(r.inject(r.PLATFORM_ID))},token:m,providedIn:"root"}),m);function m(e){this.platformId=e}var v=(I.prototype["delete"]=function(e,t){if(a.isPlatformBrowser(this.platformId))if(t&&"string"!=typeof t)"object"==typeof t&&delete t[e];else switch(t){case"local":case"localStorage":delete localStorage[e];break;case"memory":delete this.memoryStorage[e];break;default:delete sessionStorage[e]}},I.prototype.get=function(e,t){var r;if(a.isPlatformBrowser(this.platformId))try{r=JSON.parse(this.getValue(e,t))}catch(n){r=this.getValue(e,t)}return r},I.prototype.getValue=function(e,t){var r;if(t&&"string"!=typeof t)"object"==typeof t&&(r=t[e]);else switch(t){case"local":case"localStorage":r=localStorage[e];break;case"memory":r=this.memoryStorage[e];break;default:r=sessionStorage[e]}return this.decrypt(r)},I.prototype.decrypt=function(e){return null!==e&&e!==undefined&&""!==e&&this.configuration&&this.configuration.storage&&this.configuration.storage.encryptionSecret&&(e=t.AES.decrypt(e,this.configuration.storage.encryptionSecret).toString(t.enc.Utf8)),e},I.prototype.encrypt=function(e){return null!==e&&e!==undefined&&""!==e&&this.configuration&&this.configuration.storage&&this.configuration.storage.encryptionSecret?(e=t.AES.encrypt(e,this.configuration.storage.encryptionSecret)).toString():e},I.prototype.set=function(e,t,r){if(a.isPlatformBrowser(this.platformId)){var n=this.encrypt(JSON.stringify(t));if(r&&"string"!=typeof r)r[e]=n;else switch(r){case"local":case"localStorage":localStorage[e]=n;break;case"memory":this.memoryStorage[e]=n;break;default:sessionStorage[e]=n}}},I.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],I.ctorParameters=function(){return[{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]},{type:undefined,decorators:[{type:r.Inject,args:["FactorUtilsConfiguration"]}]}]},I.ngInjectableDef=r.defineInjectable({factory:function(){return new I(r.inject(r.PLATFORM_ID),r.inject("FactorUtilsConfiguration"))},token:I,providedIn:"root"}),I);function I(e,t){this.platformId=e,this.configuration=t}var j=(w.prototype.get=function(e){var t=this.cacheMap.get(e.urlWithParams);return t?36e5<Date.now()-t.entryTime?null:t.response:null},w.prototype.put=function(e,t){var r={url:e.urlWithParams,response:t,entryTime:Date.now()};this.cacheMap.set(e.urlWithParams,r),this.deleteExpired()},w.prototype.invalidate=function(e){this.cacheMap["delete"](e)},w.prototype.deleteExpired=function(){var t=this;this.cacheMap.forEach(function(e){36e5<Date.now()-e.entryTime&&t.cacheMap["delete"](e.url)})},w.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],w.ngInjectableDef=r.defineInjectable({factory:function(){return new w},token:w,providedIn:"root"}),w);function w(){this.cacheMap=new Map}var b=(S.prototype.intercept=function(t,e){var r=this;if(!this.isRequestCachable(t))return e.handle(t);var n=this.cacheService.get(t);return null!==n?o.of(n):e.handle(t).pipe(c.tap(function(e){e instanceof i.HttpResponse&&r.cacheService.put(t,e)}))},S.prototype.isRequestCachable=function(t){return"GET"===t.method&&this.configuration.cache.urls.find(function(e){return-1<t.url.indexOf(e)})},S.decorators=[{type:r.Injectable}],S.ctorParameters=function(){return[{type:j},{type:undefined,decorators:[{type:r.Inject,args:["FactorUtilsConfiguration"]}]}]},S);function S(e,t){this.cacheService=e,this.configuration=t}var E=(k.forRoot=function(e){return{ngModule:k,providers:[{provide:"FactorUtilsConfiguration",useValue:e}]}},k.decorators=[{type:r.NgModule,args:[{declarations:[],imports:[],exports:[]}]}],k);function k(){}e.FilesService=s,e.GoogleAnalyticsErrorHandler=d,e.GoogleAnalyticsService=u,e.GoogleTagManagerErrorHandler=g,e.GoogleTagManagerService=y,e.StorageService=v,e.CacheService=j,e.CacheInterceptor=b,e.UtilsModule=E,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=factor-utils.umd.min.js.map