{"version":3,"file":"factor-utils.umd.js.map","sources":["ng://factor-utils/lib/storage.service.ts","ng://factor-utils/lib/google-analytics.service.ts","ng://factor-utils/lib/utils.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StorageService {\n\n  constructor() { }\n\n  delete(key: string, storage?) {\n    if (storage) {\n      delete storage[key];\n    } else {\n      delete sessionStorage[key];\n    }\n  }\n  get(key: string, storage?) {\n    let parsedValue;\n    let value = storage ? storage[key] : sessionStorage[key];\n    if (value) {\n      try {\n        parsedValue = JSON.parse(value);\n      } catch (err) {\n        parsedValue = value;\n      }\n    }\n    return parsedValue;\n  }\n  set(key: string, value: any, storage?) {\n    if (storage) {\n      storage[key] = JSON.stringify(value);\n    } else {\n      sessionStorage[key] = JSON.stringify(value);\n    }\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\n\ndeclare var gtag: Function;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GoogleAnalyticsService {\n  private trackingId: string;\n\n  constructor(\n    public router: Router\n  ) {\n    router.events.subscribe(event => {\n      try {\n        if (typeof gtag === 'function') {\n          if (event instanceof NavigationEnd && this.trackingId) {\n            setTimeout(() => {\n              gtag('config', this.trackingId, {\n                'page_title': document.title,\n                'page_path': event.urlAfterRedirects\n              });\n            }, 100);\n          }\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n  public appendTrackingCode(trackingId: string) {\n    try {\n      if (trackingId) {\n        this.trackingId = trackingId;\n        const s1 = document.createElement('script');\n        s1.async = true;\n        s1.src = `https://www.googletagmanager.com/gtag/js?id=${trackingId}`;\n        document.head.appendChild(s1);\n        const s2 = document.createElement('script');\n        s2.innerHTML = `\n         window.dataLayer = window.dataLayer || [];\n         function gtag(){dataLayer.push(arguments);}\n         gtag('js', new Date());\n         gtag('config', '${trackingId}');\n       `;\n        document.head.appendChild(s2);\n      }\n    } catch (ex) {\n      console.error('Error appending google analytics');\n      console.error(ex);\n    }\n  }\n  public trackEvent(action: string, category: string = null, label: string = null, value: number = null) {\n    if (typeof gtag === 'function') {\n      gtag('event', action, {\n        event_category: category,\n        event_label: label,\n        value: value\n      });\n    }\n  }\n  public trackException(description: string, fatal: boolean) {\n    if (typeof gtag === 'function') {\n      gtag('event', 'exception', {\n        description: description,\n        fatal: fatal\n      });\n    }\n  }\n  public setUserId(userId: string) {\n    if (typeof gtag === 'function') {\n      gtag('set', { 'user_id': userId });\n    }\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\n\n@NgModule({\n  declarations: [\n\n  ],\n  imports: [\n\n  ],\n  exports: [\n\n  ]\n})\nexport class UtilsModule {\n  public static forRoot(configuration: any): ModuleWithProviders {\n    return {\n      ngModule: UtilsModule,\n      providers: [\n        { provide: 'FactorUtilsConfiguration', useValue: configuration }\n      ]\n    };\n  }\n}\n"],"names":["Injectable","NavigationEnd","Router","NgModule"],"mappings":"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"}
