{"version":3,"file":"factor-utils.js.map","sources":["ng://factor-utils/lib/storage.service.ts","ng://factor-utils/lib/google-analytics.service.ts","ng://factor-utils/lib/utils.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StorageService {\n\n  constructor() { }\n\n  delete(key: string, storage?) {\n    if (storage) {\n      delete storage[key];\n    } else {\n      delete sessionStorage[key];\n    }\n  }\n  get(key: string, storage?) {\n    let parsedValue;\n    let value = storage ? storage[key] : sessionStorage[key];\n    if (value) {\n      try {\n        parsedValue = JSON.parse(value);\n      } catch (err) {\n        parsedValue = value;\n      }\n    }\n    return parsedValue;\n  }\n  set(key: string, value: any, storage?) {\n    if (storage) {\n      storage[key] = JSON.stringify(value);\n    } else {\n      sessionStorage[key] = JSON.stringify(value);\n    }\n  }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\n\ndeclare var gtag: Function;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GoogleAnalyticsService {\n  constructor(\n    public router: Router,\n    @Inject('FactorUtilsConfiguration') private configuration\n  ) {\n    router.events.subscribe(event => {\n      try {\n        if (typeof gtag === 'function') {\n          if (event instanceof NavigationEnd) {\n            setTimeout(() => {\n              gtag('config', this.configuration.gaTrackingId, {\n                'page_title': document.title,\n                'page_path': event.urlAfterRedirects\n              });\n            }, 100);\n          }\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n  public appendTrackingCode() {\n    try {\n      if (this.configuration && this.configuration.gaTrackingId) {\n        const s1 = document.createElement('script');\n        s1.async = true;\n        s1.src = `https://www.googletagmanager.com/gtag/js?id=${this.configuration.gaTrackingId}`;\n        document.head.appendChild(s1);\n        const s2 = document.createElement('script');\n        s2.innerHTML = `\n         window.dataLayer = window.dataLayer || [];\n         function gtag(){dataLayer.push(arguments);}\n         gtag('js', new Date());\n         gtag('config', '${this.configuration.gaTrackingId}');\n       `;\n        document.head.appendChild(s2);\n      }\n    } catch (ex) {\n      console.error('Error appending google analytics');\n      console.error(ex);\n    }\n  }\n  public trackEvent(action: string, category: string = null, label: string = null, value: number = null) {\n    if (typeof gtag === 'function') {\n      gtag('event', action, {\n        event_category: category,\n        event_label: label,\n        value: value\n      });\n    }\n  }\n  public trackException(description: string, fatal: boolean) {\n    if (typeof gtag === 'function') {\n      gtag('event', 'exception', {\n        description: description,\n        fatal: fatal\n      });\n    }\n  }\n  public setUserId(userId: string) {\n    if (typeof gtag === 'function') {\n      gtag('set', { 'user_id': userId });\n    }\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\n\n@NgModule({\n  declarations: [\n\n  ],\n  imports: [\n\n  ],\n  exports: [\n\n  ]\n})\nexport class UtilsModule {\n  public static forRoot(configuration: any): ModuleWithProviders {\n    return {\n      ngModule: UtilsModule,\n      providers: [\n        { provide: 'FactorUtilsConfiguration', useValue: configuration }\n      ]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
