{"version":3,"file":"factor-common.js.map","sources":["ng://factor-common/lib/icon/icon.component.ts","ng://factor-common/lib/image/image.component.ts","ng://factor-common/lib/progress/progress.component.ts","ng://factor-common/lib/message/message.component.ts","ng://factor-common/lib/message.service.ts","ng://factor-common/lib/observe-intersecting.directive.ts","ng://factor-common/lib/common.module.ts"],"sourcesContent":["import { Component, OnInit, Input, Inject } from '@angular/core';\n\n@Component({\n  selector: 'ft-icon',\n  templateUrl: './icon.component.html',\n  styleUrls: ['./icon.component.scss']\n})\nexport class IconComponent implements OnInit {\n  @Input()\n  name: string;\n  @Input()\n  collection: string;\n  @Input()\n  path: string;\n\n  constructor(\n    @Inject('FactorCommonConfiguration') private configuration\n  ) { }\n\n  ngOnInit() {\n    if (!this.collection) {\n      if (this.configuration.icon && this.configuration.icon.collection) {\n        this.collection = this.configuration.icon.collection;\n      } else {\n        this.collection = 'icons';\n      }\n    }\n    if (!this.path) {\n      if (this.configuration.icon && this.configuration.icon.path) {\n        this.path = this.configuration.icon.path;\n      } else {\n        this.path = 'assets';\n      }\n    }\n  }\n}\n","import { Component, OnInit, Input, HostBinding, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'ft-image',\n  templateUrl: './image.component.html',\n  styleUrls: ['./image.component.scss']\n})\nexport class ImageComponent implements OnInit {\n  @HostBinding('class.error')\n  error: boolean;\n  @HostBinding('class.loading')\n  loading: boolean;\n  @Input()\n  src: string;\n  shown: boolean;\n\n  constructor(\n    private element: ElementRef\n  ) { }\n\n  ngOnInit() {\n    if (\"IntersectionObserver\" in window) {\n      let elementObserver = new IntersectionObserver((entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            let image = new Image();\n            image.src = this.src;\n            setTimeout(() => {\n              this.loading = true;\n            }, 100);\n            image.onerror = () => {\n              this.error = true;\n              this.loading = false;\n            };\n            image.onload = () => {\n              if (\"decode\" in image) {\n                image.decode().then(() => {\n                  this.loading = false;\n                  this.shown = true;\n                });\n              } else {\n                console.error('Image.decode not available.');\n              }\n            };\n            elementObserver.unobserve(this.element.nativeElement);\n          }\n        });\n      }, {\n        rootMargin: \"0px 0px 200px 0px\"\n      });\n      elementObserver.observe(this.element.nativeElement);\n    } else {\n      console.error('IntersectionObserver not available.');\n      this.shown = true;\n    }\n  }\n\n}\n","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'ft-progress',\n  templateUrl: './progress.component.html',\n  styleUrls: ['./progress.component.scss']\n})\nexport class ProgressComponent implements OnInit {\n  @Input()\n  color: string = 'var(--primary)';\n  @Input()\n  mode: 'determinate' | 'indeterminate' = 'indeterminate';\n  @Input()\n  value: number = 0;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, EventEmitter, HostBinding, Inject, Input, OnInit, Output } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\n@Component({\n  selector: 'ft-message',\n  templateUrl: './message.component.html',\n  styleUrls: ['./message.component.scss']\n})\nexport class MessageComponent implements OnInit {\n  @Output()\n  beforeSelect: EventEmitter<any> = new EventEmitter();\n\n  constructor(\n    public dialogRef: MatDialogRef<MessageComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: any\n  ) { }\n\n  ngOnInit() {\n  }\n  select(value) {\n    this.beforeSelect.emit(value);\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { ReplaySubject, Observable, of } from \"rxjs\";\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatDialog } from '@angular/material/dialog';\n\nimport { MessageComponent } from './message/message.component';\n\nexport interface Action {\n  label: string;\n  value: any;\n  color?: string;\n}\nexport interface Options {\n  type?: 'modal' | 'notification';\n  actions?: Action[];\n  duration?: number;\n  title?: string;\n  width?: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageService {\n  element: any;\n\n  constructor(\n    private snackBar: MatSnackBar,\n    private dialog: MatDialog\n  ) { }\n\n  show(message: string, options?: Options): Observable<any> {\n    let selectionSource: ReplaySubject<string> = new ReplaySubject<string>(null);\n    let selection: Observable<string> = selectionSource.asObservable();\n    const defaults: any = {\n      type: null,\n      duration: 2000\n    };\n    options = Object.assign(defaults, options);\n    switch (options.type) {\n      default:\n      case 'notification':\n        this.snackBar.open(message, '', {\n          duration: options.duration || 2000,\n        });\n        break;\n      case 'modal':\n        const dialogRef = this.dialog.open(MessageComponent, {\n          width: options.width || '250px',\n          data: { message, options },\n          autoFocus: false,\n          disableClose: true\n        });\n        dialogRef.componentInstance.beforeSelect.subscribe(response => {\n          selectionSource.next(response);\n          dialogRef.close();\n        });\n        this.snackBar.dismiss();\n        break;\n    }\n    return selection;\n  }\n}\n","import { Directive, EventEmitter, HostListener, OnInit, Output, Input, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[ftObserveIntersecting]'\n})\nexport class ObserveIntersectingDirective implements OnInit {\n  @Input('ftObserveIntersectingOptions')\n  options: { root: any, rootMargin: any, threshold: any };\n  @Output('ftObserveIntersecting')\n  event: EventEmitter<boolean> = new EventEmitter();\n\n  constructor(\n    private element: ElementRef\n  ) { }\n\n  ngOnInit() {\n    if (\"IntersectionObserver\" in window) {\n      const elementObserver = new IntersectionObserver((entries, observer) => {\n        entries.forEach((entry) => {\n          this.event.emit(entry.isIntersecting);\n        });\n      }, this.options);\n      elementObserver.observe(this.element.nativeElement);\n    } else {\n      console.error('ftObserveIntersecting not available in this browser.');\n    }\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule as AngularCommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\n\nimport { IconComponent } from './icon/icon.component';\nimport { ImageComponent } from './image/image.component';\nimport { ProgressComponent } from './progress/progress.component';\nimport { ObserveIntersectingDirective } from './observe-intersecting.directive';\nimport { MessageComponent } from './message/message.component';\n\n@NgModule({\n  declarations: [\n    IconComponent,\n    ImageComponent,\n    ProgressComponent,\n    ObserveIntersectingDirective,\n    MessageComponent\n  ],\n  imports: [\n    AngularCommonModule,\n    MatButtonModule,\n    MatDialogModule,\n    MatSnackBarModule\n  ],\n  exports: [\n    IconComponent,\n    ImageComponent,\n    ProgressComponent,\n    ObserveIntersectingDirective\n  ],\n  entryComponents: [\n    MessageComponent\n  ]\n})\nexport class CommonModule {\n  public static forRoot(configuration: any): ModuleWithProviders {\n    return {\n      ngModule: CommonModule,\n      providers: [\n        { provide: 'FactorCommonConfiguration', useValue: configuration }\n      ]\n    };\n  }\n}\n"],"names":["CommonModule","AngularCommonModule"],"mappings":"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"}
