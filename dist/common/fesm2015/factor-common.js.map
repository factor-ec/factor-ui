{"version":3,"file":"factor-common.js.map","sources":["ng://factor-common/lib/icon/icon.component.ts","ng://factor-common/lib/image/image.component.ts","ng://factor-common/lib/progress/progress.component.ts","ng://factor-common/lib/message.service.ts","ng://factor-common/lib/ripple.directive.ts","ng://factor-common/lib/observe-intersecting.directive.ts","ng://factor-common/lib/common.module.ts"],"sourcesContent":["import { Component, OnInit, Input, Inject } from '@angular/core';\n\n@Component({\n  selector: 'ft-icon',\n  templateUrl: './icon.component.html',\n  styleUrls: ['./icon.component.scss']\n})\nexport class IconComponent implements OnInit {\n  @Input()\n  name: string;\n  @Input()\n  collection: string;\n  @Input()\n  path: string;\n\n  constructor(\n    @Inject('FactorCommonConfiguration') private configuration\n  ) { }\n\n  ngOnInit() {\n    if (!this.collection) {\n      if (this.configuration.icon && this.configuration.icon.collection) {\n        this.collection = this.configuration.icon.collection;\n      } else {\n        this.collection = 'icons';\n      }\n    }\n    if (!this.path) {\n      if (this.configuration.icon && this.configuration.icon.path) {\n        this.path = this.configuration.icon.path;\n      } else {\n        this.path = 'assets';\n      }\n    }\n  }\n}\n","import { Component, OnInit, Input, HostBinding, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'ft-image',\n  templateUrl: './image.component.html',\n  styleUrls: ['./image.component.scss']\n})\nexport class ImageComponent implements OnInit {\n  @HostBinding('class.error')\n  error: boolean;\n  @HostBinding('class.loading')\n  loading: boolean;\n  @Input()\n  src: string;\n  shown: boolean;\n\n  constructor(\n    private element: ElementRef\n  ) { }\n\n  ngOnInit() {\n    if (\"IntersectionObserver\" in window) {\n      let elementObserver = new IntersectionObserver((entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            let image = new Image();\n            image.src = this.src;\n            setTimeout(() => {\n              this.loading = true;\n            }, 100);\n            image.onerror = () => {\n              this.error = true;\n              this.loading = false;\n            };\n            image.onload = () => {\n              if (\"decode\" in image) {\n                image.decode().then(() => {\n                  this.loading = false;\n                  this.shown = true;\n                });\n              } else {\n                console.error('Image.decode not available.');\n              }\n            };\n            elementObserver.unobserve(this.element.nativeElement);\n          }\n        });\n      }, {\n        rootMargin: \"0px 0px 200px 0px\"\n      });\n      elementObserver.observe(this.element.nativeElement);\n    } else {\n      console.error('IntersectionObserver not available.');\n      this.shown = true;\n    }\n  }\n\n}\n","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'ft-progress',\n  templateUrl: './progress.component.html',\n  styleUrls: ['./progress.component.scss']\n})\nexport class ProgressComponent implements OnInit {\n  @Input()\n  mode: 'determinate' | 'indeterminate' = 'indeterminate';\n  @Input()\n  value: number = 0;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\ndeclare var $: any;\n\nexport interface Options {\n  type?: string,\n  actions?: any[]\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageService {\n  element: any;\n\n  constructor() { }\n\n  show(content, options?: Options) {\n    if (this.element) {\n\n    }\n    this.element = document.createElement('div');\n    switch (options.type) {\n      case 'toast':\n        this.element.classList.add('toast', 'fade');\n        this.element.style = 'position: fixed; bottom: 2rem; left: 2rem; right: 2rem; margin: auto;';\n        this.element.innerHTML = `\n            <div class=\"toast-body\">${content}</div>\n          `;\n        document.body.appendChild(this.element);\n        $(this.element).toast('show');\n        break;\n      default:\n        this.element.classList.add('modal', 'fade');\n        this.element.innerHTML = `\n            <div class=\"modal-dialog modal-dialog-centered\">\n              <div class=\"modal-content\">\n                <div class=\"modal-body\">${content}</div>\n                <div class=\"modal-footer\" style=\"padding-top: 0; border: 0;\">\n                  <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">Accept</button>\n                </div>\n              </div>\n            </div>\n          `;\n        document.body.appendChild(this.element);\n        $(this.element).modal();\n        break;\n    }\n  }\n}\n","import { Directive, ElementRef, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[ftRipple]'\n})\nexport class RippleDirective {\n  x: number;\n  y: number;\n  size: number;\n  offsets: any;\n\n  constructor(\n    private elementRef: ElementRef\n  ) { }\n\n  @HostListener('mousedown', ['$event'])\n  @HostListener('touchstart', ['$event'])\n  showRipple(event) {\n\n    let element = this.elementRef.nativeElement;\n    let ripple = element.querySelector('.ripple');\n    const eventType = event.type;\n    // Ripple\n    if (ripple === null) {\n      // Create ripple\n      ripple = document.createElement('span');\n      ripple.classList.add('ripple');\n\n      // Prepend ripple to element\n      element.insertBefore(ripple, element.firstChild);\n\n      // Set ripple this.size\n      if (!ripple.offsetHeight && !ripple.offsetWidth) {\n        this.size = Math.max(element.offsetWidth, element.offsetHeight);\n        ripple.style.width = this.size + 'px';\n        ripple.style.height = this.size + 'px';\n      }\n    }\n\n    // Remove animation effect\n    ripple.className = ripple.className.replace(/ ?(ripple-animate)/g, '');\n\n    // get click coordinates by event type\n    if (eventType === 'mousedown') {\n      this.x = event.pageX;\n      this.y = event.pageY;\n    } else if (eventType === 'touchstart') {\n      try {\n        let originalEvent;\n        if (typeof event.changedTouches !== 'undefined') {\n          originalEvent = event.changedTouches[0];\n        } else {\n          originalEvent = event.originalEvent;\n        }\n        this.x = originalEvent.pageX;\n        this.y = originalEvent.pageY;\n      } catch (e) {\n        // fall back to center of el\n        this.x = ripple.offsetWidth / 2;\n        this.y = ripple.offsetHeight / 2;\n      }\n    }\n    this.offsets = this.getPosition(element);\n    ripple.style.left = (this.x - this.offsets.left - this.size / 2) + 'px';\n    ripple.style.top = (this.y - this.offsets.top - this.size / 2) + 'px';\n\n    // Add animation effect\n    ripple.classList.add('ripple-animate');\n  }\n  getPosition(element) {\n    const de = document.documentElement;\n    const box = element.getBoundingClientRect();\n    const top = box.top + window.pageYOffset - de.clientTop;\n    const left = box.left + window.pageXOffset - de.clientLeft;\n    return { top: top, left: left };\n  }\n}\n","import { Directive, EventEmitter, HostListener, OnInit, Output, Input, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[ftObserveIntersecting]'\n})\nexport class ObserveIntersectingDirective implements OnInit {\n  @Input('ftObserveIntersectingOptions')\n  options: { root: any, rootMargin: any, threshold: any };\n  @Output('ftObserveIntersecting')\n  event: EventEmitter<boolean> = new EventEmitter();\n\n  constructor(\n    private element: ElementRef\n  ) { }\n\n  ngOnInit() {\n    if (\"IntersectionObserver\" in window) {\n      const elementObserver = new IntersectionObserver((entries, observer) => {\n        entries.forEach((entry) => {\n          this.event.emit(entry.isIntersecting);\n        });\n      }, this.options);\n      elementObserver.observe(this.element.nativeElement);\n    } else {\n      console.error('ftObserveIntersecting not available in this browser.');\n    }\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule as AngularCommonModule } from '@angular/common';\nimport { IconComponent } from './icon/icon.component';\nimport { ImageComponent } from './image/image.component';\nimport { RippleDirective } from './ripple.directive';\nimport { ProgressComponent } from './progress/progress.component';\nimport { ObserveIntersectingDirective } from './observe-intersecting.directive';\n\n@NgModule({\n  declarations: [\n    IconComponent,\n    ImageComponent,\n    RippleDirective,\n    ProgressComponent,\n    ObserveIntersectingDirective\n  ],\n  imports: [\n    AngularCommonModule\n  ],\n  exports: [\n    IconComponent,\n    ImageComponent,\n    RippleDirective,\n    ProgressComponent,\n    ObserveIntersectingDirective\n  ]\n})\nexport class CommonModule {\n  public static forRoot(configuration: any): ModuleWithProviders {\n    return {\n      ngModule: CommonModule,\n      providers: [\n        { provide: 'FactorCommonConfiguration', useValue: configuration }\n      ]\n    };\n  }\n}\n"],"names":["CommonModule","AngularCommonModule"],"mappings":"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"}
