{"version":3,"file":"factor-inputs.js.map","sources":["ng://factor-inputs/lib/inputs.service.ts","ng://factor-inputs/lib/file-picker/file-picker.component.ts","ng://factor-inputs/lib/invalid-feedback/invalid-feedback.component.ts","ng://factor-inputs/lib/inputs.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InputsService {\n\n  constructor() { }\n}\n","import { Component, ElementRef, forwardRef, HostBinding, HostListener, Input, OnInit, Output } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Component({\n  selector: 'ft-file-picker',\n  templateUrl: './file-picker.component.html',\n  styleUrls: ['./file-picker.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FilePickerComponent),\n      multi: true\n    }\n  ]\n})\nexport class FilePickerComponent implements OnInit, ControlValueAccessor {\n  @Input()\n  set accept (value: string) {\n    this.fileInput.accept = value;\n  }\n  @Input()\n  set disabled (value: boolean) {\n    this.fileInput.disabled = value;\n  }\n  @Input()\n  set multiple (value: boolean) {\n    this.fileInput.multiple = value;\n  }\n  @HostBinding('class.dragover') dragover: boolean;\n  fileInput: HTMLInputElement;\n  _value: string;\n  propagateChange = (_: any) => { };\n\n  constructor(private elementRef: ElementRef) {\n    this.createInput();\n  }\n\n  ngOnInit() {\n\n  }\n  createInput() {\n    const componentElement = this.elementRef.nativeElement;\n    this.fileInput = document.createElement('input');\n    this.fileInput.style.display = 'none';\n    this.fileInput.type = 'file';\n    this.fileInput.addEventListener('change', (event: any) => {\n      const reader = new FileReader();\n      this.loadValue(event.target.files);\n    });\n    componentElement.appendChild(this.fileInput);\n  }\n  loadValue(files) {\n    if (files && files.length>0) {\n      let data: any[] = [];\n      for (let i = 0; i<files.length; i++) {\n        const file = files.item(i);\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => {\n          data.push({\n            data: reader.result,\n            lastModifiedDate: file.lastModifiedDate,\n            name: file.name,\n            size: file.size,\n            type: file.type\n          });\n          if (data.length==files.length) {\n            this.value = data.length>0? data : null;\n          }\n        };\n      }\n    }\n  }\n  @HostListener('click')\n  openDialog() {\n    this.fileInput.click();\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value: any) {\n    this._value = value;\n    this.propagateChange(this._value);\n  }\n  writeValue(value: any) { }\n  registerOnChange(fn) {\n    this.propagateChange = fn;\n  }\n  registerOnTouched() { }\n}\n","import { Component, Input } from '@angular/core';\n\nimport { AbstractControlDirective, AbstractControl } from '@angular/forms';\n/**\n * Componente para mostrar mensajes de error en los inputs\n */\n@Component({\n  selector: 'ft-invalid-feedback',\n  templateUrl: './invalid-feedback.component.html',\n  styleUrls: ['./invalid-feedback.component.scss']\n})\nexport class InvalidFeedbackComponent {\n  /**\n   * CatÃ¡logo de mensajes segÃºn el tipo de error\n   */\n  private readonly defaultMessages = {\n    'required': (params) => 'Is required',\n    'min': (params) => 'Should be a valid',\n    'max': (params) => 'Should be a valid',\n    'minlength': (params) => '##FIELD## should be minimum ' + params.requiredLength + ' characters',\n    'maxlength': (params) => '##FIELD## should not be greater then ' + params.requiredLength + ' characters',\n    'pattern': (params) => 'Should be a valid',\n    'email': (params) => \"Should be valid email.\",\n    'file': (params) => 'File must be valid'\n  };\n  @Input()\n  private messages: any = {};\n  /**\n   * El input para mostrar el mensaje\n   */\n  @Input()\n  private control: AbstractControlDirective | AbstractControl;\n  /**\n   * MÃ©toro que devuelve el error segÃºn corresponda\n   */\n  getError(): string {\n    let objects = this.control.errors;\n    if (objects !== null) {\n      var errors = Object.keys(this.control.errors)\n        .map(field => this.getMessage(field, this.control.errors[field], this.control));\n      return errors[0];\n    }\n  }\n  /**\n   * MÃ©todo que obtiene el mensaje de error\n   */\n  private getMessage(type: string, params: any, control: any) {\n    var fname = this.getControlName(control);\n    fname = fname.replace(\"_\", \" \").replace(\" id\", \"\").toLowerCase();\n    fname = fname.replace(/\\b\\w/g, l => l.toUpperCase())\n\n    var msg = this.messages[type] || this.defaultMessages[type](params) || 'Error';\n    return control.dirty? msg.replace(\"##FIELD##\", fname) : '';\n  }\n  /**\n   * Obtiene el name del control (input)\n   * @param control AbstractControl es el control con sus propiedades\n   */\n  getControlName(control: AbstractControl): string | null {\n    const formGroup = control.parent.controls;\n    return Object.keys(formGroup).find(name => control === formGroup[name]) || null;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FilePickerComponent } from './file-picker/file-picker.component';\nimport { InvalidFeedbackComponent } from './invalid-feedback/invalid-feedback.component';\n\n@NgModule({\n  declarations: [\n    FilePickerComponent,\n    InvalidFeedbackComponent\n  ],\n  imports: [\n  ],\n  exports: [\n    FilePickerComponent,\n    InvalidFeedbackComponent\n  ]\n})\nexport class InputsModule { }\n"],"names":[],"mappings":"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"}
